{
  "entities": {
    "userProfile": {
      "title": "User Profile",
      "description": "Represents a user's profile information.",
      "type": "object",
      "properties": {
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        }
      },
      "required": ["displayName", "email"]
    },
    "project": {
      "title": "Project",
      "description": "Represents a user's project.",
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The ID of the user who owns this project."
        },
        "title": {
          "type": "string",
          "description": "The title of the project."
        },
        "description": {
          "type": "string",
          "description": "The project's description."
        },
        "startDate": {
          "type": "string",
          "format": "date-time",
          "description": "The project's start date."
        },
        "targetDate": {
          "type": "string",
          "format": "date-time",
          "description": "The project's target completion date."
        },
        "status": {
          "type": "string",
          "enum": ["Not Started", "In Progress", "On Hold", "Completed"],
          "description": "The current status of the project."
        },
        "ticketPrefix": {
          "type": "string",
          "description": "A two-letter prefix for user story tickets in this project."
        }
      },
      "required": ["userId", "title", "startDate", "targetDate", "status"]
    },
    "userStory": {
      "title": "User Story",
      "description": "Represents a user story or feature within a project.",
      "type": "object",
      "properties": {
        "ticketId": {
          "type": "string",
          "description": "The unique identifier for the story (e.g., FR-001)."
        },
        "title": {
          "type": "string",
          "description": "The title of the user story."
        },
        "features": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "A list of specific features or requirements for the story."
        },
        "status": {
          "type": "string",
          "enum": ["To Do", "In Progress", "Done"],
          "description": "The current status of the user story."
        }
      },
      "required": ["ticketId", "title", "features", "status"]
    },
    "task": {
      "title": "Task",
      "description": "Represents a single development task within a user story.",
      "type": "object",
      "properties": {
        "title": {
          "type": "string",
          "description": "The title of the task."
        },
        "description": {
          "type": "string",
          "description": "A description of the task."
        },
        "priority": {
            "type": "string",
            "enum": ["Low", "Medium", "High"],
            "description": "The priority of the task."
        },
        "status": {
          "type": "string",
          "enum": ["To Do", "In Progress", "Done"],
          "description": "The current status of the task."
        },
        "workLogs": {
            "type": "array",
            "description": "A list of work sessions for this task.",
            "items": { "$ref": "#/entities/workLog" }
        }
      },
      "required": ["title", "description", "priority", "status"]
    },
    "workLog": {
        "title": "Work Log",
        "description": "Represents a single work session for a task.",
        "type": "object",
        "properties": {
            "id": {
              "type": "number"
            },
            "date": {
              "type": "string",
              "format": "date",
              "description": "The date of the work session."
            },
            "startTime": {
                "type": "string",
                "format": "time",
                "description": "The start time of the work session."
            },
            "endTime": {
                "type": "string",
                "format": "time",
                "description": "The end time of the work session."
            },
            "duration": {
                "type": "number",
                "description": "The duration of the work session in seconds."
            },
            "description": {
                "type": "string",
                "description": "A description of the work done during the session."
            },
            "pauseCount": {
                "type": "number",
                "description": "The number of times the timer was paused."
            }
        },
        "required": ["id", "date", "startTime", "endTime", "duration"]
    },
    "projectPrefixCounter": {
      "title": "Project Prefix Counter",
      "description": "A global counter to ensure unique, sequential prefixes for projects.",
      "type": "object",
      "properties": {
        "lastIndex": {
          "type": "number",
          "description": "The last used index for generating a project prefix."
        }
      },
      "required": ["lastIndex"]
    },
    "skill": {
        "title": "Skill",
        "description": "Represents a skill a user is practicing.",
        "type": "object",
        "properties": {
            "userId": { "type": "string", "description": "The ID of the user who owns this skill." },
            "name": { "type": "string", "description": "The name of the skill." },
            "icon": { "type": "string", "description": "The name of the lucide-react icon for the skill." },
            "category": { "type": "string", "description": "The category the skill belongs to." },
            "totalHours": { "type": "number", "description": "Total hours practiced for this skill." },
            "subSkills": {
                "type": "array",
                "description": "A list of sub-skills.",
                "items": {
                    "type": "object",
                    "properties": {
                        "name": { "type": "string" },
                        "goals": {
                            "type": "array",
                            "items": { "$ref": "#/entities/goal" }
                        }
                    },
                    "required": ["name", "goals"]
                }
            }
        },
        "required": ["userId", "name", "icon", "category", "totalHours", "subSkills"]
    },
    "practiceSession": {
        "title": "Practice Session",
        "description": "Represents a single practice session for a skill.",
        "type": "object",
        "properties": {
            "skillId": { "type": "string", "description": "The ID of the skill being practiced." },
            "date": { "type": "string", "format": "date-time" },
            "duration": { "type": "number", "description": "Duration of the session in seconds." },
            "whatWentWell": { "type": "string" },
            "whatWasDifficult": { "type": "string" }
        },
        "required": ["skillId", "date", "duration", "whatWentWell", "whatWasDifficult"]
    },
    "goal": {
        "title": "Goal",
        "description": "A specific goal within a sub-skill.",
        "type": "object",
        "properties": {
            "title": { "type": "string" },
            "specific": { "type": "string" },
            "measurable": { "type": "string" },
            "status": { "type": "string", "enum": ["Not Started", "In Progress", "Completed"] },
            "projectId": { "type": "string" },
            "userStoryId": { "type": "string" },
            "userStoryTicketId": { "type": "string" },
            "deadline": { "type": "string", "format": "date-time" },
            "level": {
              "type": "string",
              "enum": ["Junior", "Semi Senior", "Senior"]
            },
            "date": { "type": "string", "format": "date" },
            "duration": { "type": "number", "description": "Duration in seconds" },
            "feedback": { "type": "string" },
            "startTime": { "type": "string", "format": "time" },
            "endTime": { "type": "string", "format": "time" },
            "isLastInSubSkill": { "type": "boolean", "description": "Indicates if this is the last goal created in its sub-skill branch." }
        },
        "required": ["title", "specific", "measurable", "status"]
    },
    "generateNextGoal": {
        "title": "Generate Next Goal",
        "description": "Generates a suggestion for the next goal based on a completed one.",
        "type": "object",
        "properties": {
          "skillArea": { "type": "string" },
          "level": { "type": "string" },
          "previousGoalTitle": { "type": "string" },
          "previousGoalFeedback": { "type": "string" }
        },
        "required": ["skillArea", "level", "previousGoalTitle", "previousGoalFeedback"]
    },
    "vocabularyItem": {
      "title": "Vocabulary Item",
      "description": "Represents a single vocabulary word in a user's collection for spaced repetition.",
      "type": "object",
      "properties": {
        "userId": { "type": "string", "description": "The ID of the user who owns this item." },
        "word": { "type": "string", "description": "The vocabulary term." },
        "definition": { "type": "string", "description": "A short definition or gloss of the word." },
        "ipa": { "type": "string", "description": "The International Phonetic Alphabet notation." },
        "examples": { "type": "array", "items": { "type": "string" }, "description": "Example sentences using the word." },
        "tags": { "type": "array", "items": { "type": "string" }, "description": "Topics or lists this word belongs to." },
        "accuracy": { "type": "number", "description": "The current Exponentially Weighted Moving Average (EWMA) of practice accuracy (0.0 to 1.0)." },
        "alpha": { "type": "number", "description": "The smoothing factor for the EWMA calculation." },
        "repetitions": { "type": "number", "description": "The total number of times this word has been practiced." },
        "lastQuality": { "type": "number", "description": "The self-assessed quality of the last review (0 to 5)." },
        "lastReviewedAt": { "type": "string", "format": "date-time", "description": "The timestamp of the last practice session." },
        "status": { "type": "string", "enum": ["learning", "mastered"], "description": "The current learning status of the word." },
        "nextReviewAt": { "type": "string", "format": "date-time", "description": "The timestamp for the next scheduled review." },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" }
      },
      "required": [
        "userId",
        "word",
        "definition",
        "accuracy",
        "alpha",
        "repetitions",
        "lastQuality",
        "status",
        "createdAt",
        "updatedAt"
      ]
    }
  },
  "auth": {
    "providers": ["email", "google"]
  },
  "firestore": {
    "/projects/{projectId}": {
      "schema": { "$ref": "#/entities/project" },
      "description": "Stores individual project documents."
    },
    "/projects/{projectId}/tasks/{taskId}": {
      "schema": { "$ref": "#/entities/task" },
      "description": "Stores tasks for a specific project."
    },
    "/metadata/projectPrefixCounter": {
      "schema": { "$ref": "#/entities/projectPrefixCounter" },
      "description": "Stores the global counter for project prefixes."
    },
    "/skills/{skillId}": {
      "schema": { "$ref": "#/entities/skill" },
      "description": "Stores individual skill documents for users."
    },
     "/skills/{skillId}/practiceSessions/{sessionId}": {
      "schema": { "$ref": "#/entities/practiceSession" },
      "description": "Stores practice sessions for a specific skill."
    },
    "/vocabulary/{itemId}": {
      "schema": { "$ref": "#/entities/vocabularyItem" },
      "description": "Stores vocabulary items for users."
    }
  }
}
