{
  "entities": {
    "userProfile": {
      "title": "User Profile",
      "description": "Represents a user's profile information.",
      "type": "object",
      "properties": {
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        }
      },
      "required": ["displayName", "email"]
    },
    "project": {
      "title": "Project",
      "description": "Represents a user's project.",
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The ID of the user who owns this project."
        },
        "title": {
          "type": "string",
          "description": "The title of the project."
        },
        "description": {
          "type": "string",
          "description": "The project's description."
        },
        "startDate": {
          "type": "string",
          "format": "date-time",
          "description": "The project's start date."
        },
        "targetDate": {
          "type": "string",
          "format": "date-time",
          "description": "The project's target completion date."
        },
        "status": {
          "type": "string",
          "enum": ["Not Started", "In Progress", "On Hold", "Completed"],
          "description": "The current status of the project."
        },
        "ticketPrefix": {
          "type": "string",
          "description": "A two-letter prefix for user story tickets in this project."
        }
      },
      "required": ["userId", "title", "startDate", "targetDate", "status"]
    },
    "userStory": {
      "title": "User Story",
      "description": "Represents a user story or feature within a project.",
      "type": "object",
      "properties": {
        "ticketId": {
          "type": "string",
          "description": "The unique identifier for the story (e.g., FR-001)."
        },
        "title": {
          "type": "string",
          "description": "The title of the user story."
        },
        "features": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "A list of specific features or requirements for the story."
        },
        "status": {
          "type": "string",
          "enum": ["To Do", "In Progress", "Done"],
          "description": "The current status of the user story."
        }
      },
      "required": ["ticketId", "title", "features", "status"]
    },
    "task": {
      "title": "Task",
      "description": "Represents a single development task within a user story.",
      "type": "object",
      "properties": {
        "title": {
          "type": "string",
          "description": "The title of the task."
        },
        "description": {
          "type": "string",
          "description": "A description of the task."
        },
        "priority": {
            "type": "string",
            "enum": ["Low", "Medium", "High"],
            "description": "The priority of the task."
        },
        "status": {
          "type": "string",
          "enum": ["To Do", "In Progress", "Done"],
          "description": "The current status of the task."
        },
        "workLogs": {
            "type": "array",
            "description": "A list of work sessions for this task.",
            "items": { "$ref": "#/entities/workLog" }
        }
      },
      "required": ["title", "description", "priority", "status"]
    },
    "workLog": {
        "title": "Work Log",
        "description": "Represents a single work session for a task.",
        "type": "object",
        "properties": {
            "id": {
              "type": "number"
            },
            "date": {
              "type": "string",
              "format": "date",
              "description": "The date of the work session."
            },
            "startTime": {
                "type": "string",
                "format": "time",
                "description": "The start time of the work session."
            },
            "endTime": {
                "type": "string",
                "format": "time",
                "description": "The end time of the work session."
            },
            "duration": {
                "type": "number",
                "description": "The duration of the work session in seconds."
            },
            "description": {
                "type": "string",
                "description": "A description of the work done during the session."
            },
            "pauseCount": {
                "type": "number",
                "description": "The number of times the timer was paused."
            }
        },
        "required": ["id", "date", "startTime", "endTime", "duration"]
    },
    "projectPrefixCounter": {
      "title": "Project Prefix Counter",
      "description": "A global counter to ensure unique, sequential prefixes for projects.",
      "type": "object",
      "properties": {
        "lastIndex": {
          "type": "number",
          "description": "The last used index for generating a project prefix."
        }
      },
      "required": ["lastIndex"]
    },
    "skill": {
        "title": "Skill",
        "description": "Represents a skill a user is practicing.",
        "type": "object",
        "properties": {
            "userId": { "type": "string", "description": "The ID of the user who owns this skill." },
            "name": { "type": "string", "description": "The name of the skill." },
            "icon": { "type": "string", "description": "The name of the lucide-react icon for the skill." },
            "category": { "type": "string", "description": "The category the skill belongs to." },
            "totalHours": { "type": "number", "description": "Total hours practiced for this skill." },
            "subSkills": {
                "type": "array",
                "description": "A list of sub-skills.",
                "items": {
                    "type": "object",
                    "properties": {
                        "name": { "type": "string" },
                        "goals": {
                            "type": "array",
                            "items": { "$ref": "#/entities/goal" }
                        }
                    },
                    "required": ["name", "goals"]
                }
            }
        },
        "required": ["userId", "name", "icon", "category", "totalHours", "subSkills"]
    },
    "practiceSession": {
        "title": "Practice Session",
        "description": "Represents a single practice session for a skill.",
        "type": "object",
        "properties": {
            "skillId": { "type": "string", "description": "The ID of the skill being practiced." },
            "date": { "type": "string", "format": "date-time" },
            "duration": { "type": "number", "description": "Duration of the session in seconds." },
            "whatWentWell": { "type": "string" },
            "whatWasDifficult": { "type": "string" }
        },
        "required": ["skillId", "date", "duration", "whatWentWell", "whatWasDifficult"]
    },
    "goal": {
        "title": "Goal",
        "description": "A specific goal within a sub-skill.",
        "type": "object",
        "properties": {
            "title": { "type": "string" },
            "specific": { "type": "string" },
            "measurable": { "type": "string" },
            "status": { "type": "string", "enum": ["Not Started", "In Progress", "Completed"] },
            "projectId": { "type": "string" },
            "userStoryId": { "type": "string" },
            "userStoryTicketId": { "type": "string" },
            "deadline": { "type": "string", "format": "date-time" },
            "duration": { "type": "number", "description": "Target duration in minutes." },
            "level": {
              "type": "string",
              "enum": ["Junior", "Semi Senior", "Senior"]
            }
        },
        "required": ["title", "specific", "measurable", "status"]
    }
  },
  "auth": {
    "providers": ["email", "google"]
  },
  "firestore": {
    "/projects/{projectId}": {
      "schema": { "$ref": "#/entities/project" },
      "description": "Stores individual project documents."
    },
    "/projects/{projectId}/tasks/{taskId}": {
      "schema": { "$ref": "#/entities/task" },
      "description": "Stores tasks for a specific project."
    },
    "/metadata/projectPrefixCounter": {
      "schema": { "$ref": "#/entities/projectPrefixCounter" },
      "description": "Stores the global counter for project prefixes."
    },
    "/skills/{skillId}": {
      "schema": { "$ref": "#/entities/skill" },
      "description": "Stores individual skill documents for users."
    },
     "/skills/{skillId}/practiceSessions/{sessionId}": {
      "schema": { "$ref": "#/entities/practiceSession" },
      "description": "Stores practice sessions for a specific skill."
    }
  }
}
